  <div class="top">
    <h1>New York City Subway Investigation</h1>
  </div>
  <div class="buttons">
    <div class="line-buttons" id="one">1</div>
    <div class="line-buttons" id="two">2</div>
    <div class="line-buttons" id="three">3</div>
    <div class="line-buttons" id="four">4</div>
    <div class="line-buttons" id="five">5</div>
    <div class="line-buttons" id="six">6</div>
    <div class="line-buttons" id="seven">7</div>
    <div class="line-buttons" id="a">A</div>
    <div class="line-buttons" id="c">C</div>
    <div class="line-buttons" id="e">E</div>
    <div class="line-buttons" id="g">G</div>
    <div class="line-buttons" id="b">B</div>
    <div class="line-buttons" id="d">D</div>
    <div class="line-buttons" id="f">F</div>
    <div class="line-buttons" id="m">M</div>
    <div class="line-buttons" id="n">N</div>
    <div class="line-buttons" id="q">Q</div>
    <div class="line-buttons" id="r">R</div>
    <div class="line-buttons" id="j">J</div>
    <div class="line-buttons" id="z">Z</div>
    <div class="line-buttons" id="l">L</div>
    <!-- <div class="line-buttons" id="s42">S</div>
    <div class="line-buttons" id="sFkln">S</div>
    <div class="line-buttons" id="sRock">S</div> -->
    <button id="best-fit-button">Line of Best Fit</button>
    <button id="all-trains-button">All Trains</button>
    <button id="map-button">Back to Map</button>
  </div>
  <div class="current-line" id=""></div>
  <div class="container">
  </div>
  <div class="svg-chart">
    <div id="tooltip" class="hidden">
      <p><span id="index">month</span></p>
      <p><span id="value">100</span>%</p>
    </div>
  </div>
  <div class="description">
    <p>
      *Wait Assessment is a percentage statistic detailing the number of trains that are "on time," where "on time" means arriving within 25% of their scheduled arrival. For example, if Train A arrives, and Train B is scheduled to arrive 8 minutes later, then Train B is successfully on time if it arrives within 10 minutes.
    </p>
  </div>
  <script type="text/javascript">

    //Width and height
    var w = 900;
    var h = 500;
    var padding = 40;
    var mapWidth = 400
    var mapHeight = 500

    // Appends svg element
    var svg = d3.select(".svg-chart")
          .append("svg")
          .attr("width", w)
          .attr("height", h)
          .attr("class", "the-graph");

    // Here are some datasets
    var dataset = [];

    var nTrain = [78.8, 79.0, 79.3, 79.4, 80.0, 80.4, 80.6, 81.4, 82.1, 81.8, 82.2, 82.0, 82.2, 82.4, 82.6, 82.7, 81.9, 81.4, 81.2, 80.4, 79.3, 78.8, 78.8, 78.3, 77.5, 77.0, 76.3, 76.1, 76.1, 76.2, 75.9, 77.0, 76.8, 77.6, 77.5, 77.8, 78.1, 78.0, 78.4, 78.5, 79.0, 78.6, 78.7, 79.0, 79.4, 79.5, 78.9, 78.3, 78.4, 78.1, 78.5, 79.1, 79.1, 79.4];

    var qTrain = [81.8, 82.3, 82.2, 82.5, 83.0, 82.8, 83.1, 83.0, 82.9, 82.9, 83.3, 82.8, 82.8, 82.2, 82.2, 82.1, 81.6, 81.6, 81.4, 81.0, 80.1, 79.6, 79.0, 79.1, 78.8, 78.6, 78.3, 77.9, 77.9, 77.6, 77.9, 79.0, 78.7, 78.5, 79.1, 78.8, 78.3, 78.4, 78.6, 79.0, 79.3, 79.5, 79.6, 79.1, 79.3, 79.8, 80.0, 80.1, 80.2, 80.3, 80.6, 80.3, 79.8, 79.4];

    var rTrain = [75.7, 76.1, 76.5, 76.5, 76.7, 76.6, 76.7, 76.7, 76.9, 77.5, 78.1, 78.0, 78.0, 77.8, 77.6, 77.7, 77.8, 78.1, 78.0, 78.2, 78.6, 78.2, 78.3, 78.3, 78.0, 78.1, 78.6, 78.6, 78.5, 77.7, 78.4, 78.6, 78.0, 78.2, 77.5, 77.2, 77.6, 77.7, 77.6, 77.2, 77.2, 77.6, 77.4, 77.2, 77.0, 76.7, 77.4, 77.8, 77.7, 77.4, 77.1, 78.1, 77.4, 77.7];

    var oneTrain = [73.1, 73.1, 73.0, 73.9, 74.1, 74.2, 74.4, 75.2, 75.6, 75.5, 76.0, 76.3, 76.5, 77.1, 77.1, 76.9, 76.9, 77.3, 75.3, 75.6, 74.6, 75.0, 73.9, 70.2, 75.9, 77.3, 78.3, 78.6, 78.1, 77.4, 77.3, 79.5, 77.6, 79.8, 79.6, 79.3, 78.9, 80.2, 80.6, 79.1, 84.4, 83.6, 83.8, 86.1, 85.4, 84.9, 82.1, 82.7, 83.9, 81.9, 81.8, 83, 82.9, 83.3];

    var twoTrain = [71.8, 71.9, 72.3, 72.8, 72.9, 72.2, 73.2, 73.5, 73.9, 74.2, 74.3, 74.3, 74.2, 73.9, 74.1, 73.9, 74.4, 74.3, 71.8, 71.7, 72.4, 70.6, 71.7, 66.1, 69.6, 71.9, 72.4, 73.8, 69.2, 72.7, 71.7, 73.5, 71.3, 72.6, 73.6, 72.6, 71.4, 73.3, 74.1, 72.7, 74.2, 73.8, 74.7, 72.9, 73.4, 74.5, 74.0, 74.3, 74.9, 72.7, 74.7, 75.2, 71.9, 72.7];

    var threeTrain = [74.3, 74.8, 75.4, 76.1, 76.0, 76.0, 76.6, 76.4, 76.9, 77.6, 77.5, 77.2, 77.8, 78.2, 77.8, 77.7, 77.6, 77.9, 77.1, 77.1, 76.0, 76.4, 77.7, 72.4, 75.1, 76.3, 76.1, 77.1, 75.9, 76.4, 76.5, 77.0, 75.6, 75.9, 77.4, 75.4, 75.4, 77.1, 78.4, 76.4, 77.0, 77.7, 78.7, 76.9, 76.8, 77.6, 78.3, 75.7, 79.9, 76.4, 77.8, 77.8, 76.8, 78.3];

    var fourTrain = [68.4, 68.3, 67.9, 68.3, 68.7, 68.8, 69.0, 69.5, 70.1, 70.6, 70.9, 71.4, 72.0, 72.8, 74.0, 74.5, 75.1, 74.6, 72.7, 73.4, 74.4, 72.2, 73.7, 67.9, 70.1, 72.0, 72.9, 72.2, 72.7, 72.7, 73.0, 73.5, 72.7, 70.8, 73.7, 72.0, 73.0, 72.7, 74.5, 72.9, 75.7, 74.7, 75.6, 76.2, 74.6, 73.1, 75.2, 71.8, 73.8, 73.7, 74.9, 75, 74.1, 75.1];

    var fiveTrain = [70.6, 70.4, 70.4, 70.6, 70.5, 70.9, 72.2, 72.1, 71.8, 71.3, 71.6, 71.6, 71.0, 71.6, 71.9, 71.7, 72.4, 72.2, 72.0, 71.9, 71.9, 69.1, 71.9, 65.5, 67.2, 71.5, 71.4, 70.3, 66.2, 70.3, 71.9, 70.6, 71.1, 69.3, 72.0, 70.8, 70.9, 73.5, 74.3, 71.8, 73.1, 73.5, 73.7, 72.4, 72.7, 71.0, 72.5, 69.8, 71.1, 70.8, 72.3, 71.6, 71.0, 71.2];

    var sixTrain = [71.4, 71.7, 72.1, 72.5, 73.1, 72.9, 73.0, 73.2, 74.0, 74.1, 73.3, 73.0, 73.2, 73.1, 73.2, 73.4, 73.2, 73.5, 73.3, 74.6, 75.5, 74.4, 78.5, 71.7, 65.8, 74.4, 76.9, 75.5, 77.6, 74.4, 74.2, 74.5, 78.9, 74.7, 76.7, 75.8, 74.9, 75.4, 76.1, 76.1, 80.5, 80.9, 78.5, 81.5, 81.8, 79.0, 80.5, 74.7, 73.9, 76.2, 78.3, 79.3, 76.9, 79.1];

    var sevenTrain = [74.5, 74.4, 74.4, 74.3, 74.8, 74.9, 74.9, 76.1, 75.8, 75.8, 76.1, 76.1, 76.1, 76.2, 75.7, 75.6, 75.4, 74.6, 74.4, 74.2, 74.1, 74.1, 74.2, 74.1, 74.3, 74.4, 74.7, 75.0, 74.9, 75.9, 76.2, 76.2, 76.0, 76.3, 76.0, 76.8, 75.8, 76.1, 76.1, 76.3, 76.5, 76.5, 76.3, 76.6, 77.4, 78.0, 78.3, 77.7, 79.3, 79.2, 79.4, 79.2, 78.8, 79.2];

    var aTrain = [71.4, 71.2, 71.3, 71.2, 71.0, 71.2, 71.0, 71.1, 71.1, 71.2, 70.9, 70.6, 70.7, 71.2, 71.0, 71.3, 71.5, 71.4, 71.2, 71.0, 71.0, 71.2, 71.7, 72.2, 72.1, 72.4, 72.8, 72.5, 72.6, 73.2, 73.5, 73.3, 73.6, 73.2, 73.2, 74.2, 73.7, 73.2, 72.9, 72.8, 72.8, 72.7, 72.6, 73.1, 73.3, 73.0, 73.1, 72.7, 73.1, 73.3, 73.5, 73.8, 74.5, 74.7];

    var cTrain = [78.1, 77.7, 78.6, 78.8, 79.3, 78.7, 79.0, 78.7, 78.9, 78.7, 78.6, 78.8, 78.9, 79.7, 79.6, 79.6, 79.7, 80.6, 80.3, 80.4, 80.4, 80.6, 81.2, 81.7, 81.6, 81.4, 81.2, 81.4, 81.1, 80.9, 81.0, 80.9, 81.4, 81.0, 80.4, 80.6, 79.8, 79.4, 78.5, 77.9, 78.0, 78.3, 78.2, 78.6, 78.8, 79.6, 80.0, 80.0, 80.9, 81.3, 82.6, 84.5, 84.0, 83.8];

    var eTrain = [71.6, 71.1, 70.9, 70.9, 70.7, 71.4, 72.0, 72.3, 72.5, 73.9, 74.0, 74.0, 74.3, 74.7, 75.3, 75.6, 75.8, 75.9, 75.7, 75.8, 75.9, 75.7, 75.4, 75.9, 76.0, 75.8, 75.3, 75.4, 75.5, 75.6, 75.0, 73.8, 73.9, 73.4, 73.1, 72.4, 72.2, 72.2, 72.0, 72.8, 72.8, 72.7, 72.6, 73.3, 74.2, 75.5, 75.7, 75.7, 75.4, 75.6, 76.5, 76.4, 76.3, 76.1];

    var bTrain = [76.5, 76.8, 76.5, 76.4, 77.2, 77.4, 78.0, 78.0, 78.0, 78.1, 77.9, 78.1, 78.2, 78.0, 78.2, 78.2, 77.8, 77.5, 77.8, 77.6, 77.3, 77.2, 77.2, 78.1, 78.0, 78.0, 77.6, 77.9, 78.0, 78.4, 78.8, 78.7, 78.8, 78.9, 79.0, 78.6, 78.4, 78.6, 78.9, 79.0, 79.0, 78.7, 78.5, 79.1, 79.4, 79.4, 79.8, 79.6, 79.5, 79.2, 79.6, 79.3, 80.0, 80.5];

    var dTrain = [78.0, 77.9, 78.8, 79.0, 79.5, 80.1, 80.1, 80.6, 80.5, 80.5, 80.8, 80.6, 80.4, 80.6, 80.3, 80.4, 79.7, 79.3, 79.5, 79.0, 79.4, 79.5, 79.4, 79.6, 79.8, 79.8, 79.8, 79.7, 80.0, 80.4, 79.9, 79.4, 79.5, 79.2, 79.5, 79.1, 79.2, 79.2, 79.0, 79.0, 78.8, 78.3, 78.3, 78.2, 78.4, 78.8, 78.3, 78.5, 78.7, 78.5, 78.7, 78.6, 78.8, 79.3];

    var fTrain = [69.3, 68.8, 68.7, 68.8, 68.8, 69.4, 69.2, 69.1, 69.7, 70.0, 69.9, 70.1, 69.9, 70.4, 70.6, 70.5, 71.3, 71.6, 72.0, 72.3, 71.7, 72.0, 72.7, 73.1, 73.2, 72.6, 73.3, 73.7, 73.5, 73.7, 73.1, 73.6, 74.8, 74.1, 74.0, 73.4, 73.6, 74.6, 74.2, 73.9, 73.9, 73.8, 74.0, 73.2, 73.2, 73.7, 74.0, 75.0, 74.8, 74.2, 74.4, 74.4, 75.2, 75.2];

    var mTrain = [85.2, 85.7, 85.7, 85.8, 85.9, 86.1, 87.1, 87.9, 87.9, 87.2, 87.6, 87.7, 88.0, 87.8, 88.0, 87.5, 87.3, 87.8, 87.3, 86.6, 84.8, 84.1, 83.1, 82.9, 82.3, 82.1, 81.4, 80.9, 80.3, 80.0, 79.7, 78.6, 79.2, 78.9, 78.9, 78.6, 78.4, 78.1, 77.3, 77.6, 77.8, 77.6, 77.7, 77.8, 77.7, 78.1, 77.9, 77.7, 77.4, 77.5, 77.7, 77.8, 78.2, 78.3];

    var jTrain = [82.9, 83.5, 83.8, 84.1, 84.8, 84.8, 84.8, 85.0, 85.1, 85.6, 86.1, 86.0, 86.3, 86.1, 86.5, 86.1, 85.4, 85.5, 85.9, 85.7, 85.9, 85.7, 85.4, 85.4, 84.9, 84.1, 83.5, 83.6, 84.1, 84.1, 84.5, 84.2, 83.1, 82.6, 82.5, 82.2, 82.6, 82.8, 82.3, 82.8, 82.3, 82.0, 81.6, 81.7, 82.0, 82.4, 82.3, 82.6, 82.1, 82.4, 82.5, 82.2, 81.9, 82.1];

    var zTrain = jTrain;

    var gTrain = [79.5, 79.2, 79.8, 80.2, 79.9, 79.9, 79.7, 79.3, 79.8, 80.0, 80.2, 80.0, 80.7, 81.0, 81.4, 81.4, 82.0, 82.5, 83.0, 83.5, 83.2, 83.4, 83.9, 84.6, 84.1, 84.3, 83.5, 83.0, 82.7, 82.2, 81.6, 82.2, 82.3, 81.7, 81.4, 81.1, 81.8, 82.0, 82.5, 83.6, 83.4, 83.6, 83.7, 83.4, 83.6, 84.2, 83.1, 83.6, 83.5, 83.2, 83.5, 83.2, 84.0, 84.3];

    var lTrain = [75.1, 75.5, 75.8, 76.3, 76.6, 76.6, 77.1, 77.7, 78.0, 77.7, 78.4, 77.8, 77.9, 77.3, 76.9, 76.8, 76.6, 76.4, 76.5, 76.3, 75.8, 76.2, 75.8, 76.7, 77.0, 77.6, 78.8, 79.1, 79.6, 80.1, 80.4, 80.6, 80.1, 79.8, 80.0, 80.5, 79.5, 79.6, 79.0, 79.0, 79.4, 79.1, 78.8, 79.3, 80.0, 80.4, 80.3, 80.2, 81.3, 81.4, 81.5, 81.6, 82.2, 82.4];

    var s42Train = [77.1, 77.2, 77.5, 76.5, 76.6, 76.6, 76.7, 77.1, 77.3, 76.9, 76.5, 77.6, 77.8, 78.5, 78.5, 79.9, 80.3, 81.3, 82.2, 81.7, 81.6, 82.4, 81.9, 82.2, 82.1, 81.9, 82.3, 82.2, 82.5, 82.3, 82.7, 83.9, 83.8, 84.7, 83.9, 87.1, 88.4, 87.7, 89.2, null, null, null, null, null, null, null, null, null, 91.7, 89.2, 90.3, 94.2, 93.4, 93.7];

    var sFklnTrain = [97.9, 96.2, 96.5, 96.7, 96.8, 96.7, 97.0, 97.1, 97.2, 97.0, 96.9, 97.1, 97.1, 97.4, 97.4, 97.5, 97.6, 97.8, 97.8, 97.8, 97.9, 98.2, 98.4, 98.1, 98.1, 97.9, 97.9, 97.7, 97.6, 97.5, 97.3, 96.8, 96.8, 96.8, 96.3, 96.3, 96.4, 96.6, 96.5, 96.4, 96.0, 96.0, 96.0, 96.3, 96.1, 96.1, 96.2, 96.5, 96.3, 95.9, 96.1, 96.6, 97.2, 96.9];

    var sRockTrain = [90.1, 91.5, 91.3, 91.5, 91.9, 92.2, 92.4, 92.7, 92.6, 92.6, 92.4, 92.5, 92.6, 92.8, 93.1, 93.2, 92.7, 92.5, 92.6, 92.3, 92.4, 92.5, 93.0, 92.7, 92.9, 92.7, 92.8, 92.9, 93.5, 93.6, 93.6, 93.3, 93.5, 93.4, 93.0, 93.0, 93.2, 93.0, 93.0, 93.1, 92.9, 93.0, 92.8, 92.8, 93.3, 93.1, 93.1, 94.1, 94.5, 95.1, 95.6, 96.1, 96.9, 96.9];

    var allTrains = [75.5, 75.7, 76.0, 76.2, 76.5, 76.7, 77.1, 77.4, 77.7, 77.9, 78.1, 78.1, 78.2, 78.4, 78.5, 78.6, 78.7, 78.8, 79.2, 79.1, 78.9, 78.6, 79.1, 77.9, 78.0, 78.8, 78.9, 78.9, 78.6, 78.8, 78.9, 79.1, 79.0, 78.8, 79.1, 78.8, 78.8, 79.1, 79.3, 78.9, 79.3, 79.2, 79.2, 79.3, 79.5, 79.5, 79.6, 79.0, 79.6, 79.3, 79.9, 80.1, 79.9, 80.3];

    var dates = ["Jan 2009", "Feb 2009", "Mar 2009", "Apr 2009", "May 2009", "June 2009", "July 2009", "Aug 2009", "Sept 2009", "Oct 2009", "Nov 2009", "Dec 2009", "Jan 2010", "Feb 2010", "Mar 2010", "Apr 2010", "May 2010", "June 2010", "July 2010", "Aug 2010", "Sept 2010", "Oct 2010", "Nov 2010", "Dec 2010", "Jan 2011", "Feb 2011", "Mar 2011", "Apr 2011", "May 2011", "June 2011", "July 2011", "Aug 2011", "Sept 2011", "Oct 2011", "Nov 2011", "Dec 2011", "Jan 2012", "Feb 2012", "Mar 2012", "Apr 2012", "May 2012", "June 2012", "July 2012", "Aug 2012", "Sept 2012", "Oct 2012", "Nov 2012", "Dec 2012", "Jan 2013", "Feb 2013", "Mar 2013", "Apr 2013", "May 2013", "June 2013", "Aug 2013", "Sept 2013"];

    var totalRidership = [126009217, 120462055, 136722849, 133627175, 133291045, 134869386, 132712155, 124429585, 132849077, 140665575, 129582208, 134646273, 124453847, 116642180, 141694962, 137493648, 136783505, 137776559, 131462116, 129614344, 134616599, 142062724, 135692863, 135904672, 126714693, 123148197, 144992308, 134759291, 140211645, 146943606, 131188482, 128020545, 138363218, 144272734, 139725379, 141987712, 132772387, 132353517, 147440937, 139083547, 148398562, 141989816, 137123261, 139368048, 136962617, 137138044, 124291965, 137234842, 136985100, 127917491, 142934752, 146388414, 150544398, 141256868];

    var nStations = [["Ditmars Blvd",40.775036,-73.912034],["Astoria Blvd-Hoyt Av",40.770258,-73.917843],["30 Av-Grand Av",40.766779,-73.921479],["Broadway",40.76182,-73.925508],["36 Av-Washington Av",40.756804,-73.929575],["39 Av-Beebe Av",40.752882,-73.932755],["Queensboro Plaza",40.750582,-73.940202],["Lexington Av",40.76266,-73.967258],["59th St",40.762526,-73.967967],["57th St",40.764664,-73.980658],["49th St",40.759901,-73.984139],["Times Square",40.75529,-73.987495],["34th St",40.749567,-73.98795],["28th St",40.745494,-73.988691],["23rd St",40.741303,-73.989344],["14th St-Union Square",40.734673,-73.989951],["8th St",40.730328,-73.992629],["Prince St",40.724329,-73.997702],["Canal St",40.718092,-73.999892],["Atlantic Av-Barclays Ctr",40.683666,-73.97881],["36th St",40.655144,-74.003549],["59th St",40.641362,-74.017881],["8th Av",40.635064,-74.011719],["Fort Hamilton Parkway",40.631386,-74.005351],["New Utrecht Av",40.624842,-73.996353],["18th Av",40.620671,-73.990414],["20th Av",40.61741,-73.985026],["Bay Parkway-22nd Av",40.611815,-73.981848],["Kings Highway",40.603923,-73.980353],["Av U",40.597473,-73.979137],["86th St",40.592721,-73.97823],["Stillwell Av",40.577422,-73.981233]];

    var qStations = [["Ditmars Blvd",40.775036,-73.912034],["Astoria Blvd-Hoyt Av",40.770258,-73.917843],["30 Av-Grand Av",40.766779,-73.921479],['Broadway',40.76182,-73.925508],["36 Av-Washington Av",40.756804,-73.929575],["39 Av-Beebe Av",40.752882,-73.932755],["Queensboro Plaza",40.750582,-73.940202],["Lexington Av",40.76266,-73.967258],["59th St",40.762526,-73.967967],["57th St",40.764664,-73.980658],["49th St",40.759901,-73.984139],["Times Square-42nd St",40.754672,-73.986754],["34th St",40.749567,-73.98795],["14th St-Union Square",40.734673,-73.989951],["Canal St",40.718092,-73.999892],["DeKalb Av",40.690635,-73.981824],["Atlantic Av-Barclays Ctr",40.683666,-73.97881],["7th Av",40.67705,-73.972367],["Prospect Park",40.661614,-73.962246],["Parkside Av",40.655292,-73.961495],["Church Av",40.650527,-73.962982],["Beverly Rd",40.644031,-73.964492],["Cortelyou Rd",40.640927,-73.963891],["Newkirk Av",40.635082,-73.962793],["Av H",40.62927,-73.961639],["Av J",40.625039,-73.960803],["Av M",40.617618,-73.959399],["Kings Highway",40.60867,-73.957734],["Av U",40.5993,-73.955929],["Neck Rd",40.595246,-73.955161],["Sheepshead Bay",40.586896,-73.954155],["Brighton Beach",40.577621,-73.961376],["Ocean Parkway",40.576312,-73.968501],["West 8th St",40.576127,-73.975939],["Stillwell Av",40.577422,-73.981233]];

    var rStations = [["Forest Hills-71st Av",40.721691,-73.844521],["67th Av",40.726523,-73.852719],["63rd Drive-Rego Park",40.729846,-73.861604],["Woodhaven Blvd",40.733106,-73.869229],["Grand Av-Newtown",40.737015,-73.877223],["Elmhurst Av",40.742454,-73.882017],["Jackson Heights-Roosevelt Ave",40.746644,-73.891338],["65th St",40.749669,-73.898453],["Northern Blvd",40.752885,-73.906006],["46th St",40.756312,-73.913333],["Steinway St",40.756879,-73.92074],["36th St",40.752039,-73.928781],["Queens Plaza",40.748973,-73.937243],["Lexington Av",40.76266,-73.967258],["59th St",40.762526,-73.967967],["57th St",40.764664,-73.980658],["49th St",40.759901,-73.984139],["Times Square-42nd St",40.754672,-73.986754],["34th St",40.749719,-73.987823],["28th St",40.745494,-73.988691],["23rd St",40.741303,-73.989344],["14th St-Union Square",40.734673,-73.989951],["8th St",40.730328,-73.992629],["Prince St",40.724329,-73.997702],["Canal St",40.718092,-73.999892],["City Hall",40.713282,-74.006978],["Cortlandt St",40.710668,-74.011029],["Rector St",40.70722,-74.013342],["Whitehall St",40.703087,-74.012994],["Court St",40.6941,-73.991777],["Jay St - Borough Hall",40.692338,-73.987342],["DeKalb Av",40.690635,-73.981824],["Atlantic Av-Barclays Ctr",40.683666,-73.97881],["Union St",40.677316,-73.98311],["9th St",40.670847,-73.988302],["Prospect Av",40.665414,-73.992872],["25th St",40.660397,-73.998091],["36th St",40.655144,-74.003549],["45th St",40.648939,-74.010006],["53rd St",40.645069,-74.014034],["59th St",40.641362,-74.017881],["Bay Ridge Av",40.634967,-74.023377],["77th St",40.629742,-74.02551],["86th St",40.622687,-74.028398],["95th St",40.616622,-74.030876]];

    var oneStations = [["Van Cortlandt Park-242nd St",40.889248,-73.898583],["238th St",40.884667,-73.90087],["231st St",40.878856,-73.904834],["Marble Hill-225th St",40.874561,-73.909831],["215th St",40.869444,-73.915279],["207th St",40.864614,-73.918819],["Dyckman St",40.860531,-73.925536],["191st St",40.855225,-73.929412],["181st St",40.849505,-73.933596],["168th St",40.840556,-73.940133],["157th St",40.834041,-73.94489],["145th St",40.826551,-73.95036],["137th St-City College",40.822008,-73.953676],["125th St",40.815581,-73.958372],["116th St-Columbia University",40.807722,-73.96411],["Cathedral Parkway-110th St",40.803967,-73.966847],["103rd St",40.799446,-73.968379],["96th St",40.793919,-73.972323],["86th St",40.788644,-73.976218],["79th St",40.783934,-73.979917],["72nd St",40.778453,-73.98197],["66th St-Lincoln Center",40.77344,-73.982209],["59th St-Columbus Circle",40.768247,-73.981929],["50th St",40.761728,-73.983849],["Times Square-42nd St",40.754672,-73.986754],["34th St",40.750373,-73.991057],["28th St",40.747215,-73.993365],["23rd St",40.744081,-73.995657],["18th St",40.74104,-73.997871],["14th St",40.737826,-74.000201],["Christopher St",40.733422,-74.002906],["Houston St",40.728251,-74.005367],["Canal St",40.722854,-74.006277],["Franklin St",40.719318,-74.006886],["Chambers St",40.715478,-74.009266],["Rector St",40.707513,-74.013783],["South Ferry",40.702068,-74.013664],["Whitehall St",40.703087,-74.012994]];

    var twoStations = [["Wakefield-241st St",40.903125,-73.85062],["238th St-Nereid Av",40.898379,-73.854376],["233rd St",40.893193,-73.857473],["225th St",40.888022,-73.860341],["219th St",40.883895,-73.862633],["Gun Hill Rd",40.87785,-73.866256],["Burke Av",40.871356,-73.867164],["Allerton Av",40.865462,-73.867352],["Pelham Parkway",40.857192,-73.867615],["Bronx Park East",40.848828,-73.868457],["East 180th St",40.841894,-73.873488],["East Tremont Av-West Farms Sq",40.840295,-73.880049],["174th St",40.837288,-73.887734],["Freeman St",40.829993,-73.891865],["Simpson St",40.824073,-73.893064],["Intervale Av",40.822181,-73.896736],["Prospect Av",40.819585,-73.90177],["Jackson Av",40.81649,-73.907807],["149th St-3rd Av",40.816109,-73.917757],["149th St-Grand Concourse",40.818375,-73.927351],["135th St",40.814229,-73.94077],["125th St",40.807754,-73.945495],["116th St",40.802098,-73.949625],["110th St-Central Park North",40.799075,-73.951822],["96th St",40.793919,-73.972323],["72nd St",40.778453,-73.98197],["Times Square-42nd St",40.754672,-73.986754],["34th St",40.750373,-73.991057],["14th St",40.738228,-73.996209],["Chambers St",40.714111,-74.008585],["Park Place",40.713051,-74.008811],["Fulton St",40.709416,-74.006571],["Wall St",40.706821,-74.0091],["Clark St",40.697466,-73.993086],["Borough Hall",40.693219,-73.989998],["Hoyt St",40.690545,-73.985065],["Nevins St",40.688246,-73.980492],["Atlantic Av-Barclays Ctr",40.683666,-73.97881],["Bergen St",40.680829,-73.975098],["Grand Army Plaza",40.675235,-73.971046],["Eastern Parkway-Brooklyn Museum",40.671987,-73.964375],["Franklin Av",40.670682,-73.958131],["President St",40.667883,-73.950683],["Sterling St",40.662742,-73.95085],["Winthrop St",40.656652,-73.9502],["Church Av",40.650843,-73.949575],["Beverly Rd",40.645098,-73.948959],["Newkirk Av",40.639967,-73.948411],["Flatbush Av-Brooklyn College",40.632836,-73.947642]];

    var threeStations = [["Harlem-148th St",40.82388,-73.93647],["145th St",40.820421,-73.936245],["135th St",40.814229,-73.94077],["125th St",40.807754,-73.945495],["116th St",40.802098,-73.949625],["110th St-Central Park North",40.799075,-73.951822],["96th St",40.793919,-73.972323],["72nd St",40.778453,-73.98197],["Times Square-42nd St",40.754672,-73.986754],["34th St",40.750373,-73.991057],["14th St",40.738228,-73.996209],["Chambers St",40.714111,-74.008585],["Park Place",40.713051,-74.008811],["Fulton St",40.709416,-74.006571],["Wall St",40.706821,-74.0091],["Clark St",40.697466,-73.993086],["Borough Hall",40.693219,-73.989998],["Hoyt St",40.690545,-73.985065],["Nevins St",40.688246,-73.980492],["Atlantic Av-Barclays Ctr",40.683666,-73.97881],["Bergen St",40.680829,-73.975098],["Grand Army Plaza",40.675235,-73.971046],["Eastern Parkway-Brooklyn Museum",40.671987,-73.964375],["Franklin Av",40.670682,-73.958131],["Nostrand Av",40.669847,-73.950466],["Kingston Av",40.669399,-73.942161],["Utica Av",40.668897,-73.932942],["Sutter Av",40.664717,-73.92261],["Saratoga Av",40.661453,-73.916327],["Rockaway Av",40.662549,-73.908946],["Junius St",40.663515,-73.902447],["Pennsylvania Av",40.664635,-73.894895],["Van Siclen Av",40.665449,-73.889395],["New Lots Av",40.666235,-73.884079]];

    var fourStations = [["Woodlawn",40.886037,-73.878751],["Mosholu Parkway",40.87975,-73.884655],["Bedford Park Blvd-Lehman College",40.873412,-73.890064],["Kingsbridge Rd",40.86776,-73.897174],["Fordham Rd",40.862803,-73.901034],["183rd St",40.858407,-73.903879],["Burnside Av",40.853453,-73.907684],["176th St",40.84848,-73.911794],["Mt Eden Av",40.844434,-73.914685],["170th St",40.840075,-73.917791],["167th St",40.835537,-73.9214],["Yankee Stadium-161st St",40.827905,-73.925651],["149th St-Grand Concourse",40.818375,-73.927351],["138th St",40.813224,-73.929849],["125th St",40.804138,-73.937594],["86th St",40.779492,-73.955589],["59th St",40.762526,-73.967967],["Grand Central-42nd St",40.751431,-73.976041],["14th St-Union Square",40.734673,-73.989951],["Brooklyn Bridge-City Hall",40.713065,-74.004131],["Fulton St",40.709416,-74.006571],["Wall St",40.707557,-74.011862],["Bowling Green",40.704817,-74.014065],["Borough Hall",40.692404,-73.990151],["Nevins St",40.688246,-73.980492],["Atlantic Av-Barclays Ctr",40.683666,-73.97881],["Franklin Av",40.670682,-73.958131],["Utica Av",40.668897,-73.932942]];

    var fiveStations = [["Eastchester-Dyre Av",40.8883,-73.830834],["Baychester Av",40.878663,-73.838591],["Gun Hill Rd",40.869526,-73.846384],["Pelham Parkway",40.857192,-73.867615],["Morris Park",40.854364,-73.860495],["East 180th St",40.841894,-73.873488],["East Tremont Av-West Farms Sq",40.840295,-73.880049],["174th St",40.837288,-73.887734],["Freeman St",40.829993,-73.891865],["Simpson St",40.824073,-73.893064],["Intervale Av",40.822181,-73.896736],["Prospect Av",40.819585,-73.90177],["Jackson Av",40.81649,-73.907807],["149th St-3rd Av",40.816109,-73.917757],["149th St-Grand Concourse",40.818375,-73.927351],["138th St",40.813224,-73.929849],["125th St",40.804138,-73.937594],["86th St",40.779492,-73.955589],["59th St",40.762526,-73.967967],["Grand Central-42nd St",40.751431,-73.976041],["14th St-Union Square",40.734673,-73.989951],["Brooklyn Bridge-City Hall",40.713065,-74.004131],["Fulton St",40.709416,-74.006571],["Wall St",40.707557,-74.011862],["Bowling Green",40.704817,-74.014065],["Borough Hall",40.693219,-73.989998],["Nevins St",40.688246,-73.980492],["Atlantic Av-Barclays Ctr",40.683666,-73.97881],["Franklin Av",40.670682,-73.958131],["President St",40.667883,-73.950683],["Sterling St",40.662742,-73.95085],["Winthrop St",40.656652,-73.9502],["Church Av",40.650843,-73.949575],["Beverly Rd",40.645098,-73.948959],["Newkirk Av",40.639967,-73.948411],["Flatbush Av-Brooklyn College",40.632836,-73.947642]];

    var sixStations = [["Pelham Bay Park", 40.852462, -73.828121],["Buhre Av", 40.84681, -73.832569],["Middletown Rd", 40.843863, -73.836322],["Westchester Square-East Tremont Av", 40.839892, -73.842952],["Zerega Av", 40.836488, -73.847036],["Castle Hill Av", 40.834255, -73.851222],["Parkchester-East 177th St", 40.833226, -73.860816],["St Lawrence Av", 40.831509, -73.867618],["Morrison Av-Soundview Av", 40.829521, -73.874516],["Elder Av", 40.828584, -73.879159],["Whitlock Av", 40.826525, -73.886283],["Hunts Point Av", 40.820948, -73.890549],["Longwood Av", 40.816104, -73.896435],["East 149th St", 40.812118, -73.904098],["East 143rd St-St Mary's St", 40.808719, -73.907657],["Cypress Av", 40.805368, -73.914042],["Brook Av", 40.807566, -73.91924],["138th St-3rd Ave", 40.810476, -73.926138],["125th St", 40.804138, -73.937594],["116th St", 40.798629, -73.941617],["110th St", 40.79502, -73.94425],["103rd St", 40.7906, -73.947478],["96th St", 40.785672, -73.95107],["86th St", 40.779492, -73.955589],["77th St", 40.77362, -73.959874],["68th St-Hunter College", 40.768141, -73.96387],["59th St", 40.762526, -73.967967],["51st St", 40.757107, -73.97192],["Grand Central-42nd St", 40.751431, -73.976041],["33rd St", 40.746081, -73.982076],["28th St", 40.74307, -73.984264],["23rd St", 40.739864, -73.986599],["14th St-Union Square", 40.734673, -73.989951],["Astor Place", 40.730054, -73.99107],["Bleecker St", 40.725915, -73.994659],["Spring St", 40.722301, -73.997141],["Canal St", 40.718092, -73.999892],["Brooklyn Bridge-City Hall", 40.713065, -74.004131]];

    var sevenStations = [["Flushing-Main St", 40.7596, -73.83003],["Mets - Willets Point", 40.754622, -73.845625],["111th St", 40.75173, -73.855334],["103rd St", 40.749865, -73.8627],["Junction Blvd", 40.749145, -73.869527],["90th St Elmhurst", 40.748408, -73.876613],["82nd St-Jackson Heights", 40.747659, -73.883697],["Broadway-74th St", 40.746848, -73.891394],["Fisk Av-69th St", 40.746325, -73.896403],["Woodside Av-61st St", 40.74563, -73.902984],["Lincoln Av-52nd St", 40.744149, -73.912549],["Bliss St-46th St", 40.743132, -73.918435],["Lowery St-40th St", 40.743781, -73.924016],["Rawson St-33rd St", 40.744587, -73.930997],["Queensboro Plaza", 40.750582, -73.940202],["45 Rd-Court House Sq", 40.747023, -73.945264],["Hunters Point", 40.742216, -73.948916],["Vernon Blvd-Jackson Av", 40.742626, -73.953581],["Grand Central-42nd St", 40.751431, -73.976041],["5th Av", 40.753821, -73.981963],["42nd St", 40.757308, -73.989735]];

    var aStations = [["Inwood - 207th St",40.868072,-73.919899],["Dyckman St-200th St",40.865491,-73.927271],["190th St",40.859022,-73.93418],["181st St",40.851695,-73.937969],["175th St",40.847391,-73.939704],["168th St - Washington Heights",40.840719,-73.939561],["145th St",40.824783,-73.944216],["125th St",40.811109,-73.952343],["59th St-Columbus Circle",40.768247,-73.981929],["42nd St",40.757308,-73.989735],["34th St",40.752287,-73.993391],["14th St",40.740893,-74.00169],["West 4th St",40.732338,-74.000495],["Canal St",40.720824,-74.005229],["Chambers St",40.714111,-74.008585],["Fulton St",40.710374,-74.007582],["High St",40.699337,-73.990531],["Jay St - Borough Hall",40.692338,-73.987342],["Hoyt & Schermerhorn",40.688484,-73.985001],["Franklin Av",40.680596,-73.955827],["Nostrand Av",40.680438,-73.950426],["Kingston-Throop",40.679921,-73.940858],["Utica Av",40.679364,-73.930729],["Ralph Av",40.678822,-73.920786],["Rockaway Av",40.67834,-73.911946],["Broadway Junction-East New York",40.678334,-73.905316],["Liberty Av",40.674542,-73.896548],["Van Siclen Av",40.67271,-73.890358],["Shepherd Av",40.67413,-73.88075],["Euclid Av",40.675377,-73.872106],["Grant Av",40.677044,-73.86505],["80th St-Hudson St",40.679371,-73.858992],["88th St-Boyd Av",40.679843,-73.85147],["Rockaway Blvd",40.680429,-73.843853],["104th St-Oxford Av",40.681711,-73.837683],["111th St-Greenwood Av",40.684331,-73.832163],["Lefferts Blvd",40.685951,-73.825798],["111th St-Greenwood Av",40.684331,-73.832163],["104th St-Oxford Av",40.681711,-73.837683],["Rockaway Blvd",40.680429,-73.843853],["Aqueduct Racetrack",40.672131,-73.835812],["Aqueduct-North Conduit Av",40.668234,-73.834058],["Howard Beach",40.660476,-73.830301],["Broad Channel",40.608382,-73.815925],["Beach 67th St",40.590927,-73.796924],["Beach 60th St",40.592374,-73.788522],["Beach 44th St",40.592943,-73.776013],["Beach 36th St",40.595398,-73.768175],["Beach 25th St",40.600066,-73.761353],["Far Rockaway-Mott Av",40.603995,-73.755405]];

    var cStations = [["168th St",40.840556,-73.940133],["163rd St - Amsterdam Av",40.836013,-73.939892],["155th St",40.830518,-73.941514],["145th St",40.824783,-73.944216],["135th St",40.817894,-73.947649],["125th St",40.811109,-73.952343],["116th St",40.805085,-73.954882],["Cathedral Parkway-110th St",40.800605,-73.958158],["103rd St",40.796092,-73.961454],["96th St",40.791646,-73.964699],["86th St",40.785868,-73.968916],["81st St - Museum of Natural History",40.781433,-73.972143],["72nd St",40.775594,-73.97641],["59th St",40.768296,-73.981736],["50th St",40.762456,-73.985984],["42nd St",40.757308,-73.989735],["34th St",40.752287,-73.993391],["23rd St",40.745906,-73.998041],["14th St",40.740893,-74.00169],["West 4th St",40.732338,-74.000495],["Spring St",40.726227,-74.003739],["Canal St",40.720824,-74.005229],["Chambers St",40.714111,-74.008585],["Fulton St",40.710374,-74.007582],["High St",40.699337,-73.990531],["Jay St - Borough Hall",40.692338,-73.987342],["Hoyt & Schermerhorn",40.688484,-73.985001],["Lafayette Av",40.686113,-73.973946],["Clinton & Washington Avs",40.683263,-73.965838],["Franklin Av",40.68138,-73.956848],["Nostrand Av",40.680438,-73.950426],["Kingston-Throop",40.679921,-73.940858],["Utica Av",40.679364,-73.930729],["Ralph Av",40.678822,-73.920786],["Rockaway Av",40.67834,-73.911946],["Broadway Junction-East New York",40.678334,-73.905316],["Liberty Av",40.674542,-73.896548],["Van Siclen Av",40.67271,-73.890358],["Shepherd Av",40.67413,-73.88075],["Euclid Av",40.675377,-73.872106]];

    var eStations = [["Parsons Blvd-Archer Av - Jamaica Center",40.702147,-73.801109],["Sutphin Blvd-Archer Av - JFK",40.700486,-73.807969],["Jamaica-Van Wyck",40.702566,-73.816859],["Kew Gardens-Union Turnpike",40.714441,-73.831008],["75th Av",40.718331,-73.837324],["Forest Hills-71st Av",40.721691,-73.844521],["Jackson Heights-Roosevelt Ave",40.746644,-73.891338],["Queens Plaza",40.748973,-73.937243],["23rd St-Ely Av",40.747846,-73.946],["Lexington Av-53rd St",40.757552,-73.969055],["5th Av-53rd St",40.760167,-73.975224],["7th Av",40.762862,-73.981637],["50th St",40.762456,-73.985984],["42nd St",40.757308,-73.989735],["34th St",40.752287,-73.993391],["23rd St",40.745906,-73.998041],["14th St",40.740893,-74.00169],["West 4th St",40.732338,-74.000495],["Spring St",40.726227,-74.003739],["Canal St",40.720824,-74.005229],["World Trade Center",40.712582,-74.009781]];

    var bStations = [["Bedford Park Blvd",40.873244,-73.887138],["Kingsbridge Rd",40.866978,-73.893509],["Fordham Rd",40.861296,-73.897749],["182nd-183rd Sts",40.856093,-73.900741],["Tremont Av",40.85041,-73.905227],["174-175th Sts",40.8459,-73.910136],["170th St",40.839306,-73.9134],["167th St",40.833769,-73.918432],["Yankee Stadium-161st St",40.827905,-73.925651],["155th St",40.830135,-73.938209],["145th St",40.824783,-73.944216],["135th St",40.817894,-73.947649],["125th St",40.811109,-73.952343],["116th St",40.805085,-73.954882],["Cathedral Parkway-110th St",40.800605,-73.958158],["103rd St",40.796092,-73.961454],["96th St",40.791646,-73.964699],["86th St",40.785868,-73.968916],["81st St - Museum of Natural History",40.781433,-73.972143],["72nd St",40.775594,-73.97641],["59th St-Columbus Circle",40.768247,-73.981929],["7th Av",40.762862,-73.981637],["47-50th Sts Rockefeller Center",40.758663,-73.981329],["42nd St",40.754222,-73.984569],["34th St",40.749567,-73.98795],["West 4th St",40.732338,-74.000495],["Broadway-Lafayette St",40.725297,-73.996204],["Grand St",40.718267,-73.993753],["DeKalb Av",40.690635,-73.981824],["Atlantic Av-Barclays Ctr",40.683666,-73.97881],["7th Av",40.67705,-73.972367],["Prospect Park",40.661614,-73.962246],["Church Av",40.650527,-73.962982],["Newkirk Av",40.635082,-73.962793],["Kings Highway",40.60867,-73.957734],["Sheepshead Bay",40.586896,-73.954155],["Brighton Beach",40.577621,-73.961376]];

    var dStations = [["Norwood-205th St",40.874811,-73.878855],["Bedford Park Blvd",40.873244,-73.887138],["Kingsbridge Rd",40.866978,-73.893509],["Fordham Rd",40.861296,-73.897749],["182nd-183rd Sts",40.856093,-73.900741],["Tremont Av",40.85041,-73.905227],["174-175th Sts",40.8459,-73.910136],["170th St",40.839306,-73.9134],["167th St",40.833769,-73.918432],["Yankee Stadium-161st St",40.827905,-73.925651],["155th St",40.830135,-73.938209],["145th St",40.824783,-73.944216],["125th St",40.811109,-73.952343],["59th St-Columbus Circle",40.768247,-73.981929],["7th Av",40.762862,-73.981637],["47-50th Sts Rockefeller Center",40.758663,-73.981329],["42nd St",40.754222,-73.984569],["34th St",40.749567,-73.98795],["West 4th St",40.732338,-74.000495],["Broadway-Lafayette St",40.725297,-73.996204],["Grand St",40.718267,-73.993753],["Atlantic Av-Barclays Ctr",40.683666,-73.97881],["36th St",40.65445,-74.00455],["9th Av",40.646292,-73.994324],["Fort Hamilton Parkway",40.640914,-73.994304],["50th St",40.63626,-73.994791],["55th St",40.631435,-73.995476],["62nd St",40.626472,-73.996895],["71st St",40.619589,-73.998864],["79th St",40.613501,-74.00061],["18th Av",40.607954,-74.001736],["20th Av",40.604556,-73.998168],["Bay Parkway",40.601875,-73.993728],["25th Av",40.597704,-73.986829],["Bay 50th St",40.588841,-73.983765],["Stillwell Av",40.577422,-73.981233]];

    var fStations = [["Jamaica-179th St",40.712646,-73.783817],["169th St",40.71047,-73.793604],["Parsons Blvd",40.707564,-73.803326],["Sutphin Blvd",40.70546,-73.810708],["Briarwood-Van Wyck Blvd",40.709179,-73.820574],["Kew Gardens-Union Turnpike",40.714441,-73.831008],["75th Av",40.718331,-73.837324],["Forest Hills-71st Av",40.721691,-73.844521],["Jackson Heights-Roosevelt Ave",40.746644,-73.891338],["21st St",40.754203,-73.942836],["Roosevelt Island",40.759145,-73.95326],["Lexington Av",40.764627,-73.96611],["57th St",40.763972,-73.97745],["47-50th Sts Rockefeller Center",40.758663,-73.981329],["42nd St",40.754222,-73.984569],["34th St",40.749567,-73.98795],["23rd St",40.742878,-73.992821],["14th St",40.738228,-73.996209],["West 4th St",40.732338,-74.000495],["Broadway-Lafayette St",40.725297,-73.996204],["2nd Av",40.723402,-73.989938],["Delancey St",40.718611,-73.988114],["East Broadway",40.713715,-73.990173],["York St",40.699743,-73.986885],["Jay St - Borough Hall",40.692338,-73.987342],["Bergen St",40.686145,-73.990862],["Carroll St",40.680303,-73.995048],["Smith-9th St",40.67358,-73.995959],["4th Av",40.670272,-73.989779],["7th Av",40.666271,-73.980305],["Prospect Park-15 St",40.660365,-73.979493],["Fort Hamilton Parkway",40.650782,-73.975776],["Church Av",40.644041,-73.979678],["Ditmas Av",40.636119,-73.978172],["18th Av",40.629755,-73.976971],["Av I",40.625322,-73.976127],["Bay Parkway-22nd Av",40.620769,-73.975264],["Av N",40.61514,-73.974197],["Av P",40.608944,-73.973022],["Kings Highway",40.603217,-73.972361],["Av U",40.596063,-73.973357],["Av X",40.58962,-73.97425],["Neptune Av-Van Siclen",40.581011,-73.974574],["West 8th St",40.576127,-73.975939],["Stillwell Av",40.577422,-73.981233]];

    var mStations = [["Forest Hills-71st Av",40.721691,-73.844521],["67th Av",40.726523,-73.852719],["63rd Drive-Rego Park",40.729846,-73.861604],["Woodhaven Blvd",40.733106,-73.869229],["Grand Av-Newtown",40.737015,-73.877223],["Elmhurst Av",40.742454,-73.882017],["Jackson Heights-Roosevelt Ave",40.746644,-73.891338],["65th St",40.749669,-73.898453],["Northern Blvd",40.752885,-73.906006],["46th St",40.756312,-73.913333],["Steinway St",40.756879,-73.92074],["36th St",40.752039,-73.928781],["Queens Plaza",40.748973,-73.937243],["23rd St-Ely Av",40.747846,-73.946],["Lexington Av-53rd St",40.757552,-73.969055],["5th Av-53rd St",40.760167,-73.975224],["47-50th Sts Rockefeller Center",40.758663,-73.981329],["42nd St",40.754222,-73.984569],["34th St",40.749567,-73.98795],["23rd St",40.742878,-73.992821],["14th St",40.738228,-73.996209],["West 4th St",40.732338,-74.000495],["Broadway-Lafayette St",40.725297,-73.996204],["Essex St",40.718315,-73.987437],["Marcy Av",40.708359,-73.957757],["Hewes St",40.70687,-73.953431],["Lorimer St",40.703869,-73.947408],["Flushing Av",40.70026,-73.941126],["Myrtle Av",40.697207,-73.935657],["Central Av",40.697857,-73.927397],["Knickerbocker Av",40.698664,-73.919711],["Myrtle Av",40.699814,-73.911586],["Seneca Av",40.702762,-73.90774],["Forest Av",40.704423,-73.903077],["Fresh Pond Rd",40.706186,-73.895877],["Metropolitan Av",40.711396,-73.889601]];

    var jStations = [["Parsons Blvd-Archer Av - Jamaica Center",40.702147,-73.801109],["Sutphin Blvd-Archer Av - JFK",40.700486,-73.807969],["121st St",40.700492,-73.828294],["111th St",40.697418,-73.836345],["104th St-102nd St",40.695178,-73.84433],["Woodhaven Blvd",40.693879,-73.851576],["Forest Parkway-85th St",40.692435,-73.86001],["Elderts Lane-75th St",40.691324,-73.867139],["Cypress Hills",40.689941,-73.87255],["Crescent St",40.683194,-73.873785],["Norwood Av",40.68141,-73.880039],["Cleveland St",40.679947,-73.884639],["Van Siclen Av",40.678024,-73.891688],["Alabama Av",40.676992,-73.898654],["Broadway Junction-East New York",40.678334,-73.905316],["Chauncey St",40.682893,-73.910456],["Halsey St",40.68637,-73.916559],["Gates Av",40.68963,-73.92227],["Kosciusko St",40.693342,-73.928814],["Myrtle Av",40.697207,-73.935657],["Flushing Av",40.70026,-73.941126],["Lorimer St",40.703869,-73.947408],["Hewes St",40.70687,-73.953431],["Marcy Av",40.708359,-73.957757],["Essex St",40.718315,-73.987437],["Bowery",40.72028,-73.993915],["Canal St",40.718803,-74.000193],["Chambers St",40.713243,-74.003401],["Fulton St",40.710374,-74.007582],["Broad St",40.706476,-74.011056]];

    var zStations = jStations;

    var gStations = [["23rd St-Ely Av",40.747846,-73.946],["21st St",40.744065,-73.949724],["Greenpoint Av",40.731352,-73.954449],["Nassau Av",40.724635,-73.951277],["Metropolitan Av",40.712792,-73.951418],["Broadway",40.706092,-73.950308],["Flushing Av",40.700377,-73.950234],["Myrtle-Willoughby Avs",40.694568,-73.949046],["Bedford-Nostrand Avs",40.689627,-73.953522],["Classon Av",40.688873,-73.96007],["Clinton-Washington Avs",40.688089,-73.966839],["Fulton St",40.687119,-73.975375],["Hoyt & Schermerhorn",40.688484,-73.985001],["Bergen St",40.686145,-73.990862],["Carroll St",40.680303,-73.995048],["Smith-9th St",40.67358,-73.995959],["4th Av",40.670272,-73.989779],["7th Av",40.666271,-73.980305],["Prospect Park-15 St",40.660365,-73.979493],["Fort Hamilton Parkway",40.650782,-73.975776],["Church Av",40.644041,-73.979678]];

    var lStations = [["Canarsie - Rockaway Parkway", 40.646654, -73.90185],["East 105th St", 40.650573, -73.899485],["New Lots Av", 40.658733, -73.899232],["Livonia Av", 40.664038, -73.900571],["Sutter Av", 40.669367, -73.901975],["Atlantic Av", 40.675345, -73.903097],["Broadway Junction-East New York", 40.678334, -73.905316],["Bushwick Av", 40.682829, -73.905249],["Wilson Av", 40.688764, -73.904046],["Halsey St", 40.695602, -73.904084],["Myrtle Av", 40.699814, -73.911586],["DeKalb Av", 40.703811, -73.918425],["Jefferson St", 40.706607, -73.922913],["Morgan Av", 40.706152, -73.933147],["Montrose Av", 40.707739, -73.93985],["Grand St", 40.711926, -73.94067],["Graham Av", 40.714565, -73.944053],["Lorimer St", 40.714063, -73.950275],["Bedford Av", 40.717304, -73.956872],["1st Av", 40.730953, -73.981628],["3rd Av", 40.732849, -73.986122],["Union Square", 40.734789, -73.99073],["6th Av", 40.737335, -73.996786],["8th Av", 40.739777, -74.002578]];

    mapDataset = [];

    var projection = d3.geo.mercator() 
      .center([-73.889923, 40.730000]) 
      .scale(350000) 
      .translate([200, 250]);

    var mapsvg = d3.select(".container")
      .append("svg")
      .attr("width", w)
      .attr("height", h);

    // svg.selectAll("dot")
    //   .data(dataset)
    //   .enter()
    //   .append("circle")
    //   .attr("class", "dot")
    //   .attr("transform", function(d){ return "translate(" + projection([d[2], d[1]]) + ")" })
    //   .attr("r", 1)
    //   .style("fill", '#B933AD')

    var lineFunction = d3.svg.line()
      .x(function(d) { return projection([d[2], d[1]])[0] })
      .y(function(d) { return projection([d[2], d[1]])[1] })
      .interpolate('monotone');

    mapsvg.append('path')
      .attr('d', lineFunction(mapDataset))
      .attr('stroke-width', 3)
      .attr('fill', 'none');

    var newLine = function(stationData, lineColor) {
      mapDataset = stationData

      mapsvg.selectAll('path')
        .transition()
        .ease('linear')
        .delay(100)
        .attr('d', lineFunction(mapDataset))
        .attr('stroke', lineColor)
    }

    d3.select('#n')
      .on('mouseover', function(){
        newLine(nStations, '#FCCC0A')
      })

    d3.select('#q')
      .on('mouseover', function(){
        newLine(qStations, '#FCCC0A')
      })

    d3.select('#r')
      .on('mouseover', function(){
        newLine(rStations, '#FCCC0A')
      })

    d3.select('#one')
      .on('mouseover', function(){
        newLine(oneStations, '#EE352E')
      })

    d3.select('#two')
      .on('mouseover', function(){
        newLine(twoStations, '#EE352E')
      })

    d3.select('#three')
      .on('mouseover', function(){
        newLine(threeStations, '#EE352E')
      })

    d3.select('#four')
      .on('mouseover', function(){
        newLine(fourStations, '#00933C')
      })

    d3.select('#five')
      .on('mouseover', function(){
        newLine(fiveStations, '#00933C')
      })

    d3.select('#six')
      .on('mouseover', function(){
        newLine(sixStations, '#00933C')
      })

    d3.select('#seven')
      .on('mouseover', function(){
        newLine(sevenStations, '#B933AD')
      })

    d3.select('#a')
      .on('mouseover', function(){
        newLine(aStations, '#2850AD')
      })

    d3.select('#c')
      .on('mouseover', function(){
        newLine(cStations, '#2850AD')
      })

    d3.select('#e')
      .on('mouseover', function(){
        newLine(eStations, '#2850AD')
      })

    d3.select('#j')
      .on('mouseover', function(){
        newLine(jStations, '#996633')
      })

    d3.select('#z')
      .on('mouseover', function(){
        newLine(zStations, '#996633')
      })

    d3.select('#b')
      .on('mouseover', function(){
        newLine(bStations, '#FF6319')
      })

    d3.select('#d')
      .on('mouseover', function(){
        newLine(dStations, '#FF6319')
      })

    d3.select('#f')
      .on('mouseover', function(){
        newLine(fStations, '#FF6319')
      })

    d3.select('#m')
      .on('mouseover', function(){
        newLine(mStations, '#FF6319')
      })

    d3.select('#g')
      .on('mouseover', function(){
        newLine(gStations, '#6CBE45')
      })

    d3.select('#l')
      .on('mouseover', function(){
        newLine(lStations, '#A7A9AC')
      })

    // Sets 7 train as default
    dataset = sevenTrain;

    // These set the scales
    var xScale = d3.scale.linear()
      .domain([0, 55])
      .range([padding, w - padding]);

    var domainRange = [];
    if (d3.max(dataset, function(d,i) {return d}) < 105) {
          domainRange = [65, 100]
        } else {
          domainRange = [100000000, 150000000]
        }

    // This scales with 70 to 100
    var yScale = d3.scale.linear()
      .domain(domainRange)
      .range([h - padding, padding]);

    // This scales with min and max
    // var yScale = d3.scale.linear()
    //   .domain([d3.min(dataset, function(d,i) {
    //     return d;
    //   }), d3.max(dataset, function(d,i) {
    //     return d;
    //   })])
    //   .range([h - padding, padding]);

    // These set the axes
    var xAxis = d3.svg.axis()
      .scale(xScale)
      .tickFormat(function(d, i) {
        return dates[d]
      })
      .orient('bottom');

    // Might return to this later
    // var formatAsPercentage = d3.format("1%");

    var yAxis = d3.svg.axis()
      .scale(yScale)
      .orient('left');

    // This concerns point overflow
    svg.append("clipPath")
      .attr("id", "chart-area")
      .append("rect")
      .attr("x", padding)
      .attr("y", padding)
      .attr("width", w - padding * 2)
      .attr("height", h - padding * 2);

    // This appends the points
    var circles = svg.append('g')
      .attr('id', 'circles')
      .attr("clip-path", "url(#chart-area)")
      .selectAll("circle")
      .data(dataset)
      .enter()
      .append("circle")
      // .attr('class', 'bar')
      // .style("height", function(d) {
      //   var pointHeight = d * 5;
      //   return pointHeight + "px";
      // })
      .attr("cx", function(d, i) {
        return xScale(i);
      })
      .attr("cy", function(d) {
        return yScale(d);
      })
      .attr("r", 5)
      .attr('fill', '#B933AD')
      .on("mouseover", function(d, i) {
        d3.select(this)
          .attr("r", 10);

          //Get this circles's x/y values, then augment for the tooltip
          var xPosition = parseFloat(d3.select(this).attr("cx"))// + xScale.rangeBand() / 2;
          var yPosition = parseFloat(d3.select(this).attr("cy")) - 75/// 20 + h / 2;
          //Update the tooltip position and value
          d3.select("#tooltip")
            .style("left", xPosition + "px")
            .style("top", yPosition + "px")
            .select("#index")
            .text(dates[i]);
          d3.select("#tooltip")
            .select("#value")
            .text(d);

          //Show the tooltip
          d3.select("#tooltip").classed("hidden", false);
      })
      .on("mouseout", function(d) {
        d3.select(this)
          .transition()
          .duration(250)
          .attr('r', 5);
        d3.select("#tooltip").classed("hidden", true);
      });

    // These append the axes
    svg.append('g')
      .attr("class", "axis")
      .attr("transform", "translate(0," + (h - padding) + ")")
      .call(xAxis)
     .append("text")
      .attr("class", "label")
      .attr("x", w - 40)
      .attr("y", -6)
      .style('font-size', '20px')
      .style("text-anchor", "end")
      .text("Date");

    svg.append('g')
      .attr("class", 'axis')
      .attr('transform', 'translate(' + padding + ", 0)")
      .call(yAxis)
     .append("text")
      .attr("class", "label")
      .attr("y", 40)
      .attr("x", 220)
      .attr("dy", "1em")
      .style('font-size', '20px')
      .style("text-anchor", "end")
      .text("Wait Assessment (%) *");

    // When you click a button it changes to that train's data

    d3.select("#seven")
      .on("click", function() {
        zoomOut('#seven', sevenTrain, '#B933AD', 'white')
        bestFitLine([73.97, 77.96]);
      });

    d3.select("#n")
      .on('click', function() {
        zoomOut('#n', nTrain, '#FCCC0A', 'black')
        bestFitLine([80.75, 77.67])
      });

    d3.select("#q")
      .on("click", function() {
        zoomOut('#q', qTrain, '#FCCC0A', 'black')
        bestFitLine([82.40, 78.34])
      });

    d3.select("#r")
      .on("click", function() {
        zoomOut('#r', rTrain, '#FCCC0A', 'black')
        bestFitLine([77.30, 77.87])
      });

    d3.select("#one")
      .on("click", function() {
        zoomOut('#one', oneTrain, '#EE352E', 'white')
        bestFitLine([72.53, 83.86])
      });

    d3.select("#two")
      .on("click", function() {
        zoomOut('#two', twoTrain, '#EE352E', 'white')
        bestFitLine([72.47, 73.32])
      });

    d3.select("#three")
      .on("click", function() {
        zoomOut('#three', threeTrain, '#EE352E', 'white')
        bestFitLine([76.11, 77.43])
      });

    d3.select("#four")
      .on("click", function() {
        zoomOut('#four', fourTrain, '#00933C', 'white')
        bestFitLine([69.66, 75.20])
      });

    d3.select("#five")
      .on("click", function() {
        zoomOut('#five', fiveTrain, '#00933C', 'white')
        bestFitLine([70.80, 71.66])
      });

    d3.select("#six")
      .on("click", function() {
        zoomOut('#six', sixTrain, '#00933C', 'white')
        bestFitLine([71.60, 78.82])
      });

    d3.select("#a")
      .on("click", function() {
        zoomOut('#a', aTrain, '#2850AD', 'white')
        bestFitLine([70.60, 73.93])
      });

    d3.select("#c")
      .on("click", function() {
        zoomOut('#c', cTrain, '#2850AD', 'white')
        bestFitLine([78.77, 81.31])
      });

    d3.select("#e")
      .on("click", function() {
        zoomOut('#e', eTrain, '#2850AD', 'white')
        bestFitLine([72.89, 75.37])
      });

    d3.select("#b")
      .on("click", function() {
        zoomOut('#b', bTrain, '#FF6319', 'white')
        bestFitLine([76.92, 79.66])
      });

    d3.select("#d")
      .on("click", function() {
        zoomOut('#d', dTrain, '#FF6319', 'white')
        bestFitLine([80.05, 78.72])
      });

    d3.select("#f")
      .on("click", function() {
        zoomOut('#f', fTrain, '#FF6319', 'white')
        bestFitLine([69.04, 75.59]);
      });

    d3.select("#m")
      .on("click", function() {
        zoomOut('#m', mTrain, '#FF6319', 'white')
        bestFitLine([88.74, 75.81])
      });

    d3.select("#j")
      .on("click", function() {
        zoomOut('#j', jTrain, '#996633', 'white')
        bestFitLine([85.91, 81.95])
      });

    d3.select("#z")
      .on("click", function() {
        zoomOut('#z', zTrain, '#996633', 'white')
        bestFitLine([85.91, 81.95])
      });

    d3.select("#g")
      .on("click", function() {
        zoomOut('#g', gTrain, '#6CBE45', 'white')
        bestFitLine([80.08, 84.22])
      });

    d3.select("#l")
      .on("click", function() {
        zoomOut('#l', lTrain, '#A7A9AC', 'white')
        bestFitLine([75.63, 81.31])
      });

    d3.select("#s42")
      .on("click", function() {
        zoomOut('#s42', s42Train, '#808183', 'white')
        bestFitLine([74.52, 92.14])
      });

    d3.select("#sFkln")
      .on("click", function() {
        zoomOut('#sFkln', sFklnTrain, '#808183', 'white')
        bestFitLine([97.54, 96.44])
      });

    d3.select("#sRock")
      .on("click", function() {
        zoomOut('#sRock', sRockTrain, '#808183', 'white')
        bestFitLine([91.47, 94.64])
      });

    d3.select("#all-trains-button")
      .on('click', function() {
        newPlot(allTrains, 'white')
        bestFitLine([76.94, 80.13])
        $('.current-line').css('background-color', 'black')
        $('.current-line').css('color', 'black')
      })

    // Not sure where to put this right now.
    // So I'll just leave it here.
    d3.select("#ridership-button")
      .on('click', function() {
        yScale = d3.scale.linear()
          .domain([100000000, 160000000])
          .range([h - padding, padding]);
        yAxis = d3.svg.axis()
          .scale(yScale)
          .orient('left');
        $('g.axis').remove();
        svg.append('g')
          .attr("class", 'axis')
          .attr('transform', 'translate(' + 2 * padding + ", 0)")
          .call(yAxis)
         .append("text")
          .attr("class", "label")
          .attr("y", 40)
          .attr("x", 150)
          .attr("dy", "1em")
          .style('font-size', '20px')
          .style("text-anchor", "end")
          .text("Total Ridership");

        svg.append('g')
          .attr("class", "axis")
          .attr("transform", "translate(" + padding + "," + (h - padding) + ")")
          .call(xAxis)
         .append("text")
          .attr("class", "label")
          .attr("x", w - 40)
          .attr("y", -6)
          .style('font-size', '20px')
          .style("text-anchor", "end")
          .text("Date");

        dataset = totalRidership

        svg.selectAll("circle")
          .data(dataset)
          .transition()
          .ease('linear')
          .delay(function(d, i) {
            return i * 10;
          })
          .attr('cx', function(d, i) {
            return padding + xScale(i);
          })
          .attr('cy', function(d) {
            return yScale(d);
          })
          .attr('fill', 'white')
      })

    var newPlot = function(dataInput, fillColor){
      dataset = dataInput

      svg.selectAll("circle")
        .data(dataset)
        .transition()
        .ease('linear')
        .delay(function(d, i) {
          return i * 10;
        })
        .attr('cx', function(d, i) {
          return xScale(i);
        })
        .attr('cy', function(d) {
          return yScale(d);
        })
        .attr('fill', fillColor);

      $('.current-line').css('background-color', fillColor);
    }

    var bestFitLine = function(train) {
      $('.best-fit').remove();
      var myLine = svg.append("svg:line")
        .attr('class', 'best-fit')
        .attr('id', 'hidden')
        .attr("x1", 40)
        .attr("y1", yScale(train[0]))
        .attr("x2", 830)
        .attr("y2", yScale(train[1]))
        .style("stroke", "white");
    }

    $('#best-fit-button').on('click', function(){
      $('.best-fit').fadeToggle('slow', function(){})
    })

    bestFitLine([73.97, 77.96]);

    var zoomOut = function(jqueryLine, dataInput, fillColor, textColor) {
      $(jqueryLine).css('z-index', 1)
      $(jqueryLine).css('opacity', 1)
      if ($('.container').css('display') != "none") {
        $(jqueryLine).toggle({ effect: "scale", percent: 7000, duration: 500 });
        $(jqueryLine).toggle({ effect: "scale", percent: 7000, duration: 500 });
        setTimeout(function(){
          newPlot(dataInput, fillColor)},
          1000
        )
        setTimeout(function(){
          $('.current-line').text($(jqueryLine).text())},
          800
        )
        setTimeout(function(){
          $('.current-line').css('color', textColor)},
          850
        )
        $(jqueryLine).hover(function(){
          $(jqueryLine).css('opacity', 1);
        }, function(){
          $(jqueryLine).css('opacity', .5);
        })
        setTimeout(function(){
          $('.container').css('display', 'none')
          $('.svg-chart').css('display', 'block')
          $('#best-fit-button').css('display', 'inline')
          $('#all-trains-button').css('display', 'inline')
          $('#map-button').css('display', 'inline')
          $('.current-line').css('display', 'block')
          $('.description').css('display', 'block')},
          500
        )
      } else {
        newPlot(dataInput, fillColor)
        $('.current-line').text($(jqueryLine).text())
        $('.current-line').css('color', textColor)
        $(jqueryLine).hover(function(){
          $(jqueryLine).css('opacity', 1);
        }, function(){
          $(jqueryLine).css('opacity', .5);
        })
      }
    }

    $('#map-button').on('click', function(){
      $('.svg-chart').fadeOut(500)
      $('.container').fadeIn(500)
      $('.current-line').css('display', 'none')
      $('#best-fit-button').css('display', 'none')
      $('#all-trains-button').css('display', 'none')
      $('#map-button').css('display', 'none')
      $('.description').css('display', 'none')
    })

  </script>